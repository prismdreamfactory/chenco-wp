"use strict";function debounced(n,o){var s=void 0;return function(){for(var t=arguments.length,e=Array(t),a=0;a<t;a++)e[a]=arguments[a];s&&clearTimeout(s),s=setTimeout(function(){o.apply(void 0,e),s=null},n)}}function getParameterByName(t){return decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}!function(r){function t(){var t=getParameterByName("tab");r(".tabs").length&&r("[data-tab]").on("click",function(t){r(this).addClass("active").siblings("[data-tab]").removeClass("active"),r(".tab-container").find("[data-content="+r(this).data("tab")+"]").addClass("active").siblings("[data-content]").removeClass("active"),t.preventDefault()}),r(".tabs--firm").length&&r("[data-tab]").on("click",function(t){1===r(this).data("tab")?r(this).parent().removeClass("tabs-nav--alt"):2===r(this).data("tab")?(r(this).parent().addClass("tabs-nav--alt"),r(".edge__circle").each(function(t){var e=r(this).find(".edge__circle-number"),a=e.html();e.countTo({from:0,to:a,speed:500,refreshInterval:50,onUpdate:function(){console.debug(this)},onComplete:function(){console.debug(this)}})})):r(this).parent().addClass("tabs-nav--alt")}),r("[data-tab-name="+t+"]").trigger("click")}r(window),r("#page");var c={usa:[38.901187,-110.914306],asia:[28.441223,-238.391588],global:[40.141496,-168.588005]},d={usa:"United States",global:"Global",asia:"Asia"};function e(t){var e=r("#map"),n=(r(".marker"),r(".marker[data-current=1]")),o=r(".marker[data-current=0]"),a=r(window).width()<=768?{minZoom:2,maxZoom:9,zoom:2,center:new google.maps.LatLng(c.usa[0],c.usa[1]),mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,streetViewControl:!1,styles:t}:{minZoom:3,maxZoom:9,zoom:3,center:new google.maps.LatLng(c.global[0],c.global[1]),mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,streetViewControl:!1,styles:t},s=new google.maps.Map(e[0],a);s.markers=[],g(n,s),function(a){var n=r(".map__tab"),o=r(".map__legend-region");n.each(function(){var e=this;r(this).on("click",function(){var t=r(e).data("center");n.removeClass("mod--active"),r(e).addClass("mod--active"),o.text(d[t]),"global"===t?a.setZoom(3):a.setZoom(5),a.setCenter(new google.maps.LatLng(c[t][0],c[t][1]))})})}(s);var i=[0,0,0,0],l=r(".map__switch-item");return l.each(function(){var e=r(this),a=e.data("current");e.on("click",function(){l.removeClass("mod--active"),e.addClass("mod--active");for(var t=0;t<s.markers.length;t++)s.markers[t].setMap(null);s.markers=[],g(a?n:o,s),m(s,i)})}),s.addListener("bounds_changed",debounced(200,function(){return m(s,i)})),s}function m(t,n){n=[0,0,0,0];for(var e=0;e<t.markers.length;e++)if(t.getBounds().contains(t.markers[e].getPosition()))for(var a=0;a<n.length;a++)n[a]+=Number(t.markers[e].title.split(",")[a]);r(".map__legend-row span:first-child i").each(function(t){var e=r(this),a=parseFloat(e.text().replace(/,/g,""));e.html()!==n[t]&&e.countTo({from:a,to:n[t],speed:500,refreshInterval:50,formatter:function(t,e){return t=(t=t.toFixed(e.decimals)).replace(/\B(?=(\d{3})+(?!\d))/g,",")},onUpdate:function(){console.debug(this)},onComplete:function(){console.debug(this)}})})}function g(t,e){var a=new google.maps.InfoWindow({maxWidth:400});t.each(function(){!function(t,e,a){function n(t,e){return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+e+'" viewBox="0 0 '+e+" "+e+'"><circle cx="'+e/2+'" cy="'+e/2+'" r="'+e/2+'" fill="'+t+'"/></svg>'}var o=new google.maps.LatLng(t.data("lat"),t.data("lng")),s=t.data("type").toLowerCase(),i={office:"rgb(37, 79, 123)",multifamily:"rgb(191, 144, 1)",land:"rgb(87, 135, 171)",industrial:"rgb(121, 175, 153)"},l=new google.maps.Marker({position:o,map:e,icon:r(window).width()<=768?n(i[s],10):n(i[s],14),title:t.data("stats").toString()});e.markers.push(l),t.html()&&(google.maps.event.addListener(e,"click",function(t){a.close()}),l.addListener("click",function(){a.setContent(t.html()),a.open(e,l)}))}(r(this),e,a)})}r(function(){r("a.login-link").on("click",function(t){var e=r("div.login-modal").data("modal");e&&0<e.length&&(t.preventDefault(),e.reveal({modalbgclass:"lwa-modal-bg",dismissmodalclass:"lwa-modal-close"}))}),t(),r(".slick").length&&r(".slick").slick({dots:!1,arrows:!0,infinite:!1,slidesToShow:4,responsive:[{breakpoint:1024,settings:{slidesToShow:3}},{breakpoint:768,settings:{slidesToShow:2}},{breakpoint:480,settings:{slidesToShow:1}}]}),r(".partners__toggle").change(function(){r(".tabs").removeClass("active"),"US"===r(this).val()&&r(".tabs--us").addClass("active"),"Asia"===r(this).val()&&r(".tabs--asia").addClass("active")}),r("select").select2({minimumResultsForSearch:"Infinity"}),r("#map").length&&r.getJSON("/wp-content/themes/chenco/js/map-styles.json",function(t){e(t)}),r("body, html").animate({scrollTop:0},0),r("body").hasClass("touch")})}(jQuery);