"use strict";function debounced(a,n){var s=void 0;return function(){for(var e=arguments.length,o=Array(e),t=0;t<e;t++)o[t]=arguments[t];s&&clearTimeout(s),s=setTimeout(function(){n.apply(void 0,o),s=null},a)}}function getParameterByName(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}!function(l){l(window),l("#page");var c={usa:[38.901187,-110.914306],asia:[28.441223,-238.391588],global:[40.141496,-168.588005]},m={Northern_California:{coords:[37.481569,-122.19576],zoom:8},Southern_California:{coords:[33.155,-118.033081],zoom:8},Hawaii:{coords:[31.906707,-132.501246],zoom:6,coordsAlt:[21.289373,-157.91748]},South:{coords:[30.705239,-98.67815],zoom:7},Mountain:{coords:[39.05847,-105.706326],zoom:7},Midwest:{coords:[41.65778,-90.853814],zoom:8},Southeast:{coords:[28.082342,-82.767718],zoom:7},Northeast:{coords:[40.56669,-76.621757],zoom:7}},d={usa:"United States",global:"Global",asia:"Asia"};function o(e){var o=l("#map"),n=(l(".marker"),l(".marker[data-current=1]")),a=l(".marker[data-current=0]"),t={minZoom:3,maxZoom:9,zoom:3,center:new google.maps.LatLng(c.global[0],c.global[1]),mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,streetViewControl:!1,styles:e},s=new google.maps.Map(o[0],t);s.markers=[],u(n,s),function(t){var a=l(".map__tab"),n=l(".map__legend-region");a.each(function(){var o=this;l(this).on("click",function(){var e=l(o).data("center");a.removeClass("mod--active"),l(o).addClass("mod--active"),n.text(d[e]),"global"===e?t.setZoom(3):t.setZoom(5),t.setCenter(new google.maps.LatLng(c[e][0],c[e][1]))})})}(s);var i=[0,0,0,0],r=l(".map__switch-item");return r.each(function(){var o=l(this),t=o.data("current");o.on("click",function(){r.removeClass("mod--active"),o.addClass("mod--active");for(var e=0;e<s.markers.length;e++)s.markers[e].setMap(null);s.markers=[],u(t?n:a,s),g(s,i)})}),google.maps.event.addListener(s,"zoom_changed",function(){var e=s.getZoom();console.log(e);for(var o=0;o<s.markers.length;o++)s.markers[o].setMap(null);if(s.markers=[],5===e){var t=function(e){var o=m[e].coords,t=m[e].zoom,a=new google.maps.Marker({position:new google.maps.LatLng(o[0],o[1]),map:s,icon:document.location.origin+"/wp-content/themes/chenco/assets/"+e+"_I.png"});s.markers.push(a),google.maps.event.addListener(a,"mouseover",function(){a.setIcon(document.location.origin+"/wp-content/themes/chenco/assets/"+e+"_A.png")}),google.maps.event.addListener(a,"mouseout",function(){a.setIcon(document.location.origin+"/wp-content/themes/chenco/assets/"+e+"_I.png")}),google.maps.event.addListener(a,"click",function(){m[e].coordsAlt?s.setCenter(new google.maps.LatLng(m[e].coordsAlt[0],m[e].coordsAlt[1])):s.setCenter(new google.maps.LatLng(o[0],o[1])),s.setZoom(t)})};for(var a in m)t(a)}else u(n,s)}),s.addListener("bounds_changed",debounced(200,function(){if(5<s.getZoom())return g(s,i)})),s}function g(e,a){a=[0,0,0,0];for(var o=0;o<e.markers.length;o++)if(e.getBounds().contains(e.markers[o].getPosition()))for(var t=0;t<a.length;t++)a[t]+=Number(e.markers[o].title.split(",")[t]);l(".map__legend-row span:first-child i").each(function(e){var o=l(this),t=parseFloat(o.text().replace(/,/g,""));o.html()!==a[e]&&o.countTo({from:t,to:a[e],speed:500,refreshInterval:50,formatter:function(e,o){return e=(e=e.toFixed(o.decimals)).replace(/\B(?=(\d{3})+(?!\d))/g,",")},onUpdate:function(){console.debug(this)},onComplete:function(){console.debug(this)}})})}function u(e,o){e.each(function(){!function(e,o){var t=new google.maps.LatLng(e.data("lat"),e.data("lng")),a=e.data("type").toLowerCase(),n=new google.maps.Marker({position:t,map:o,icon:function(e){return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><circle cx="8" cy="8" r="8" fill="'+e+'"/></svg>'}({office:"rgb(37, 79, 123)",multifamily:"rgb(191, 144, 1)",land:"rgb(87, 135, 171)",industrial:"rgb(121, 175, 153)"}[a]),title:e.data("stats").toString()});if(o.markers.push(n),e.html()){var s=new google.maps.InfoWindow({content:e.html(),maxWidth:400});google.maps.event.addListener(n,"click",function(){s.open(o,n)}),google.maps.event.addListener(o,"click",function(e){s.close()})}}(l(this),o)})}l(function(){l("a.login-link").on("click",function(e){var o=l("div.login-modal").data("modal");o&&0<o.length&&(e.preventDefault(),o.reveal({modalbgclass:"lwa-modal-bg",dismissmodalclass:"lwa-modal-close"}))}),function(){var e=getParameterByName("tab");l(".tabs").length&&l("[data-tab]").on("click",function(e){l(this).addClass("active").siblings("[data-tab]").removeClass("active"),l(".tab-container").find("[data-content="+l(this).data("tab")+"]").addClass("active").siblings("[data-content]").removeClass("active"),e.preventDefault()}),l(".tabs--firm").length&&l("[data-tab]").on("click",function(e){1===l(this).data("tab")?l(this).parent().removeClass("tabs-nav--alt"):l(this).parent().addClass("tabs-nav--alt")}),l("[data-tab-name="+e+"]").trigger("click")}(),l(".slick").length&&l(".slick").slick({dots:!0,arrows:!0,infinite:!1,slidesToShow:4,responsive:[{breakpoint:1024,settings:{slidesToShow:3}},{breakpoint:768,settings:{slidesToShow:2}},{breakpoint:480,settings:{slidesToShow:1}}]}),l("select").select2({minimumResultsForSearch:"Infinity"}),l("#map").length&&l.getJSON("/wp-content/themes/chenco/js/map-styles.json",function(e){o(e)}),l("body, html").animate({scrollTop:0},0),l("body").hasClass("touch")})}(jQuery);