"use strict";function debounced(n,o){var i=void 0;return function(){for(var a=arguments.length,e=Array(a),t=0;t<a;t++)e[t]=arguments[t];i&&clearTimeout(i),i=setTimeout(function(){o.apply(void 0,e),i=null},n)}}function getParameterByName(a){return decodeURIComponent((new RegExp("[?|&]"+a+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}!function(l){function a(){var a=l("#secondary-navigation").height()+l("#masthead").height()+l(".site-footer").height()+l("#wpadminbar").height(),e=l("#page");l(".slick-track").css("height",l(window).height()-a),e.css("height",l(window).height()-a)}function e(){var a=getParameterByName("tab");l(".tabs").length&&l("[data-tab]").on("click",function(a){l(this).addClass("active").siblings("[data-tab]").removeClass("active"),l(".tab-container").find("[data-content="+l(this).data("tab")+"]").addClass("active").siblings("[data-content]").removeClass("active"),a.preventDefault()}),l(".tabs--firm").length&&l("[data-tab]").on("click",function(a){1===l(this).data("tab")?l(this).parent().removeClass("tabs-nav--alt"):2===l(this).data("tab")?(l(this).parent().addClass("tabs-nav--alt"),l(".edge__circle").each(function(a){var e=l(this).find(".edge__circle-number"),t=e.html();e.countTo({from:0,to:t,speed:500,refreshInterval:50,onUpdate:function(){console.debug(this)},onComplete:function(){console.debug(this)}})})):l(this).parent().addClass("tabs-nav--alt")}),l("[data-tab-name="+a+"]").trigger("click")}l(window),l("#page");var c={usa:[38.901187,-110.914306],asia:[28.441223,-238.391588],global:[40.141496,-168.588005]};function t(a){var e=l("#map"),n=(l(".marker"),l(".marker[data-current=1]")),o=l(".marker[data-current=0]"),t=l(window).width()<=768?{minZoom:2,maxZoom:9,zoom:2,center:new google.maps.LatLng(c.usa[0],c.usa[1]),mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,streetViewControl:!1,styles:a}:{minZoom:3,maxZoom:9,zoom:3,center:new google.maps.LatLng(c.global[0],c.global[1]),mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,streetViewControl:!1,styles:a},i=new google.maps.Map(e[0],t);i.markers=[],m(n,i),function(t){var n=l(".map__tab");l(".map__legend-region");n.each(function(){var e=this;l(this).on("click",function(){var a=l(e).data("center");"asia"===a?l(".map__legend").hide():l(".map__legend").show(),n.removeClass("mod--active"),l(e).addClass("mod--active"),"global"===a?t.setZoom(3):t.setZoom(5),t.setCenter(new google.maps.LatLng(c[a][0],c[a][1]))})})}(i);var s=[0,0,0,0],r=l(".map__switch-item");return r.each(function(){var e=l(this),t=e.data("current");e.on("click",function(){r.removeClass("mod--active"),e.addClass("mod--active");for(var a=0;a<i.markers.length;a++)i.markers[a].setMap(null);i.markers=[],m(t?n:o,i),d(i,s)})}),i.addListener("bounds_changed",debounced(200,function(){return d(i,s)})),i}function d(a,n){n=[0,0,0,0];for(var e=0;e<a.markers.length;e++)if(a.getBounds().contains(a.markers[e].getPosition()))for(var t=0;t<n.length;t++)n[t]+=Number(a.markers[e].title.split(",")[t]);l(".map__legend-row span:first-child i").each(function(a){var e=l(this),t=parseFloat(e.text().replace(/,/g,""));e.html()!==n[a]&&e.countTo({from:t,to:n[a],speed:500,refreshInterval:50,formatter:function(a,e){return a=(a=a.toFixed(e.decimals)).replace(/\B(?=(\d{3})+(?!\d))/g,",")},onUpdate:function(){console.debug(this)},onComplete:function(){console.debug(this)}})})}function m(a,e){var t=new google.maps.InfoWindow({maxWidth:400});a.each(function(){!function(a,e,t){function n(a,e){return'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+e+'" viewBox="0 0 '+e+" "+e+'"><circle cx="'+e/2+'" cy="'+e/2+'" r="'+e/2+'" fill="'+a+'"/></svg>'}var o=new google.maps.LatLng(a.data("lat"),a.data("lng")),i=a.data("type").toLowerCase(),s={office:"rgb(37, 79, 123)",multifamily:"rgb(191, 144, 1)",land:"rgb(87, 135, 171)",industrial:"rgb(121, 175, 153)"},r=new google.maps.Marker({position:o,map:e,icon:l(window).width()<=768?n(s[i],10):n(s[i],14),title:a.data("stats").toString()});e.markers.push(r),a.html()&&(google.maps.event.addListener(e,"click",function(a){t.close()}),r.addListener("click",function(){t.setContent(a.html()),t.open(e,r)}))}(l(this),e,t)})}l(function(){l("a.login-link").on("click",function(a){var e=l("div.login-modal").data("modal");e&&0<e.length&&(a.preventDefault(),e.reveal({modalbgclass:"lwa-modal-bg",dismissmodalclass:"lwa-modal-close"}))}),e(),l(".slick").length&&l(".slick").slick({autoplay:!0,autoplaySpeed:3e3,dots:!0,arrows:!0,infinite:!0,slidesToShow:1}),l(".partners__toggle").change(function(a){a.preventDefault(),l(".tabs").removeClass("active"),l(".tab-container").removeClass("active"),"US"===l(this).val()&&(l(".tabs--us").addClass("active"),l(".tab-container--us").addClass("active")),"Asia"===l(this).val()&&(l(".tabs--asia").addClass("active"),l(".tab-container--asia").addClass("active"))}),l("select").select2({minimumResultsForSearch:"Infinity"}),l("#map").length&&l.getJSON("/wp-content/themes/chenco/js/map-styles.json",function(a){t(a)}),l(".home").length&&(l(window).on("load",a),l(window).on("resize",debounced(200,a))),l("body, html").animate({scrollTop:0},0),l("body").hasClass("touch")})}(jQuery);